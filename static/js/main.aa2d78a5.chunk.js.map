{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/imageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/imageGallery.module.css","components/Button/Button.module.css","App.module.css","services/image-api.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","App.js","index.js"],"names":["module","exports","fetchImages","query","pageNumber","fetch","then","res","json","data","hits","Searchbar","state","SearchName","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","e","preventDefault","trim","props","onSubmit","toast","error","className","styles","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","image","openModal","id","onClick","src","webformatURL","alt","ImageGalleryItemImage","ImageGallery","images","map","Button","MODAL_ROOT","document","querySelector","Modal","backdropRef","createRef","handleKeyPress","console","log","code","onClose","handleBackdropClick","current","target","window","addEventListener","removeEventListener","children","createPortal","Overlay","ref","role","Loader","App","isLoading","isModalOpen","largeImageId","largeImage","handleSearchSubmit","fetchImagesWithScroll","scroll","imagesApi","catch","finally","imagePhoto","find","Number","closeModal","prevProps","prevState","largeImageURL","tags","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.aa2d78a5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__vKe8D\",\"SearchForm\":\"Searchbar_SearchForm__3zZg7\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1DpUD\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2FaYZ\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2X1Q-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"imageGalleryItem_ImageGalleryItem__1Xu1Y\",\"ImageGalleryItemImage\":\"imageGalleryItem_ImageGalleryItemImage__28VqA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3C7W1\",\"Modal\":\"Modal_Modal__2aHdR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"imageGallery_ImageGallery__27l_5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__rEFFk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__32EZH\"};","export const fetchImages = (query = \"\", pageNumber = 1) => {\n  return fetch(\n    `https://pixabay.com/api/?q=${query}&page=${pageNumber}&key=22968189-f518494d66d88c5d71c698a06&image_type=photo&orientation=horizontal&per_page=12`\n  )\n    .then((res) => res.json())\n    .then((data) => data.hits);\n};\n\nexport { fetchImages as default };\n","import { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport styles from \"./Searchbar.module.css\";\n\nclass Searchbar extends Component {\n  state = {\n    SearchName: \"\",\n  };\n\n  handleNameChange = (event) => {\n    this.setState({ SearchName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.SearchName.trim() === \"\") {\n      toast.error(\"Wow so easy!\");\n      return;\n    }\n    this.props.onSubmit(this.state.SearchName);\n    this.setState({ SearchName: \"\" });\n  };\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            value={this.state.SearchName}\n            placeholder=\"Search images and photos\"\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import styles from \"./imageGalleryItem.module.css\";\n\nexport default function ImageGalleryItem({ image, openModal }) {\n  return (\n    <li id={image.id} onClick={openModal} className={styles.ImageGalleryItem}>\n      <img\n        src={image.webformatURL}\n        alt=\"\"\n        className={styles.ImageGalleryItemImage}\n      />\n    </li>\n  );\n}\n","import ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem.js\";\nimport styles from \"./imageGallery.module.css\";\n\nconst ImageGallery = ({ images, openModal }) => {\n  return (\n    <ul className={styles.ImageGallery}>\n      {images.map((image) => (\n        <ImageGalleryItem openModal={openModal} key={image.id} image={image} />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React from \"react\";\nimport styles from \"./Button.module.css\";\n\nconst Button = ({ fetchImages }) => (\n  <button type=\"button\" className={styles.Button} onClick={fetchImages}>\n    Load more...\n  </button>\n);\n\nexport default Button;\n","import React, { Component, createRef } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styles from \"./Modal.module.css\";\nconst MODAL_ROOT = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyPress);\n  }\n  backdropRef = createRef();\n\n  handleKeyPress = (e) => {\n    console.log(e);\n\n    if (e.code !== \"Escape\") {\n      return;\n    }\n    this.props.onClose();\n  };\n  handleBackdropClick = (e) => {\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { children } = this.props;\n    return createPortal(\n      <div\n        className={styles.Overlay}\n        ref={this.backdropRef}\n        onClick={this.props.onClose}\n        role=\"presentation\"\n      >\n        <div className={styles.Modal}>{children}</div>\n      </div>,\n      MODAL_ROOT\n    );\n  }\n}\n","import React from \"react\";\n\nconst Loader = () => <div>Загружаем...</div>;\n\nexport default Loader;\n","import { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as imagesApi from \"./services/image-api\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\n// import SearchInfo from './components/SearchInfo/SearchInfo'\nimport ImageGallery from \"./components/ImageGallery/ImageGallery.js\";\nimport Button from \"./components/Button/Button.js\";\nimport Modal from \"./components/Modal/Modal.js\";\nimport styles from \"./App.module.css\";\nimport Loader from \"./components/Loader/Loader\";\n\nclass App extends Component {\n  state = {\n    images: [],\n    SearchName: \"\",\n    pageNumber: 1,\n    isLoading: false,\n    error: \"\",\n    isModalOpen: false,\n    largeImageId: null,\n    largeImage: [],\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.SearchName !== this.state.SearchName) {\n      this.fetchImages(false);\n    }\n  }\n\n  //  componentDidUpdate(prevProps, prevState){\n  //       const nextName = this.props.SearchName\n  //       const prevName = prevProps.SearchName\n  //       if (prevName !== nextName) {\n\n  //           console.log('Изменилось Имя')\n  //           console.log('prevProps.SearchName', prevProps.SearchName)\n  //           console.log('this.props.SearchName', this.props.SearchName)\n  //           this.setState({ loading: true })\n  //            imagesApi\n  //         .fetchImages(nextName)\n  //           // fetch(`https://pixabay.com/api/?q=${nextName }&page=1&key=22968189-f518494d66d88c5d71c698a06&image_type=photo&orientation=horizontal&per_page=12`).then(res=> res.json()).then(names => this.setState({names})).finally(() => this.setState({loading: false}))\n  //       }\n  //   }\n  handleSearchSubmit = (SearchName) => {\n    this.setState({ SearchName, images: [], pageNumber: 1 });\n  };\n\n  fetchImagesWithScroll = () => {\n    this.fetchImages(true);\n  };\n\n  fetchImages = (scroll) => {\n    this.setState({ isLoading: true });\n    const { SearchName, pageNumber } = this.state;\n    imagesApi\n      .fetchImages(SearchName, pageNumber)\n      .then((images) => {\n        this.setState((state) => ({\n          images: [...state.images, ...images],\n          pageNumber: state.pageNumber + 1,\n        }));\n        return images[0];\n      })\n      .catch((error) => {\n        this.setState({ error });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  imagePhoto = () => {\n    const largeImg = this.state.images.find((image) => {\n      return image.id === this.state.largeImageId;\n    });\n    return largeImg;\n  };\n\n  openModal = (e) => {\n    this.setState({\n      isModalOpen: true,\n      largeImageId: Number(e.currentTarget.id),\n    });\n  };\n  closeModal = () => this.setState({ isModalOpen: false });\n  render() {\n    const { isLoading, images, isModalOpen, largeImageId } = this.state;\n    return (\n      <div className={styles.App}>\n        <ImageGallery openModal={this.openModal} images={images} />\n        {isLoading && <Loader />}\n        <Searchbar onSubmit={this.handleSearchSubmit} />\n\n        <Button fetchImages={this.fetchImagesWithScroll} />\n        {isModalOpen && (\n          <Modal largeImageId={largeImageId} onClose={this.closeModal}>\n            <img\n              src={this.imagePhoto().largeImageURL}\n              alt={this.imagePhoto().tags}\n            />\n          </Modal>\n        )}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}